<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venta de componentes de PC</title>
    <link rel="stylesheet" type="text/css" href="css/style_inicio.css">
    <link rel="stylesheet" href="css/estilos.css">
    <link rel="shortcut icon" href="Logo/FavIcon.ico">
    <link rel="stylesheet" href="css/stylegral.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;1,100&display=swap" rel="stylesheet">

</head>

<body>
    <header>
        <a href="pagina_inicio.html"><img class="logo" src="Logo/Logo.png" alt="Logo de TechDreams"></a>

        <nav>
            <ul>
                <li><a href="componentes.html" target="_self">Shop</a>
                    <ul>
                        <li><a href="Procesadores.html" target="_self">Procesadores</a></li>
                        <li><a href="componentes.html" target="_self">Componentes</a></li>
                    </ul>
                </li>
                <li><a href="Institucional.html" target="_self">Institucional</a></li>
                <li><a href="formulario de entrada.html" target="_self">Contacto</a></li>
                <li class="carrito"  onclick="hide_show ()">
                    <div id="carrito_icono">
                        <a href="shoppingcart.html" target="_blank">
                        <img src="img/herramienta.png" alt="Ver Carrito">
                        </a>
                    </div>
                </li>
            </ul>
        </nav>
    </header>
   
    <main>
        <section id="ram">
            <h2>Memorias RAM</h2>
            <ul id="memorias">
                <!-- <li>
                    <img src="img/vengearce.jpg" alt="Memoria RAM Corsair Vengeance" class="tamaño-imagen">
                    <h3>Memoria RAM Corsair Vengeance LPX 16GB DDR4 3200MHz</h3>
                    <p>$30000</p>
                    <button>Agregar al carrito</button>
                </li>
                <li>
                    <img src="img/ram fury.png" alt="Memoria RAM Kingston HyperX" class="tamaño-imagen">
                    <h3>Memoria RAM Kingston HyperX Fury 8GB DDR4 3200MHz</h3>
                    <p>$28000</p>
                    <button>Agregar al carrito</button>
                </li> -->
            </ul>
        </section>
        <section id="secgabinetes">
            <h2>Gabinetes</h2>
            <ul id="gabinetes">
                <!-- <li>
                    <img src="img/corsair4000.jpg" alt="Gabinete Corsair 4000D Airflow" class="tamaño-imagen">
                    <h3>Gabinete Corsair 4000D Airflow</h3>
                    <p>$85000</p>
                    <button>Agregar al carrito</button>
                </li>
                <li>
                    <img src="img/gabinetetower.jpg" alt="Gabinete NZXT H510" class="tamaño-imagen">
                    <h3>Gabinete NZXT H510</h3>
                    <p>$210000</p>
                    <button>Agregar al carrito</button>
                </li> -->
            </ul>
        </section>
        <section id="secmotherboards">
            <h2>Motherboards</h2>
            <ul id="motherboards">
                <!-- <li>
                    <img src="img/Motherboard ASUS.jpg" alt="Motherboard ASUS B550" class="tamaño-imagen">
                    <h3>Motherboard ASUS ROG Strix B550-F Gaming</h3>
                    <p>$138000</p>
                    <button>Agregar al carrito</button>
                </li>
                <li>
                    <img src="img/MOTHER Z590.JPG" alt="MOTHER Z590" class="tamaño-imagen">
                    <h3>Motherboard MSI MPG B550 Gaming Edge WiFi</h3>
                    <p>$135000</p>
                    <button>Agregar al carrito</button>
                </li> -->
            </ul>
        </section>
        <section id="secplacasdevideo">
            <h2>Placas de video</h2>
            <ul id="placasdevideo">
                <!-- <li>
                    <img src="img/3080ti.jpg" alt="3080ti" class="tamaño-imagen">
                    <h3>Placa de video NVIDIA GeForce RTX 3080 Ti</h3>
                    <p>$500000</p>
                    <button>Agregar al carrito</button>
                </li>
                <li>
                    <img src="img/6800xt.jpg" alt="6800xt" class="tamaño-imagen">
                    <h3>Placa de video AMD Radeon RX 6800 XT</h3>
                    <p>325000</p>
                    <button>Agregar al carrito</button>
                </li> -->
            </ul>
        </section>
    </main>
    <br>
    <footer>
        <p>© 2023 TechDreams. Todos los derechos reservados.</p>
    </footer>
    <script>
        /* const URL = "http://127.0.0.1:5000/" */
    const URL = "http://techdreamscac.pythonanywhere.com/"
    fetch(URL + 'productos')
            .then(function (response) {
                if (response.ok) {
                    return response.json(); // Parseamos la respuesta JSON
                } else {
                    // Si hubo un error, lanzar explícitamente una excepción
                    // para ser "catcheada" más adelante
                    throw new Error('Error al obtener los productos.');
                }
            })
            .then(function (data) {
            var listaMemorias = document.getElementById('memorias');
            var listaGabinetes = document.getElementById('gabinetes');
            var listaMotherboards = document.getElementById('motherboards');
            var listaPlacasdevideo = document.getElementById('placasdevideo');

            // Check if the data array has any objects
            if (data.length > 0) {
                // Iterate over the products and create li elements
                for (let i=0; i < data.length; i++) {
                    var linea = document.createElement('li');
                        linea.innerHTML = '<img src="' + data[i].imagen + '" alt="AMD Ryzen 9 5950X" class="tamaño-imagen">' +
                            '<h3>' + data[i].nombreproducto + '</h3>' +
                            '<p>' + data[i].descripcion + '</p>' +
                            '<p>Precio: &nbsp; &nbsp;&nbsp; &nbsp;$' + data[i].precio + '</p>' +
                            '<button class="addCart" value="' + data[i].codigo + '"">Agregar al carrito</button>';
                    if (data[i].categoria === 2) {
                        listaMemorias.appendChild(linea);
                    } else if(data[i].categoria === 3){
                        listaGabinetes.appendChild(linea);
                    } else if(data[i].categoria === 4){
                        listaMotherboards.appendChild(linea);
                    } else if(data[i].categoria === 5){
                        listaPlacasdevideo.appendChild(linea);
                    };
                }
            } else {
                // Handle case when data array is empty
                var mensaje = document.createElement('li');
                mensaje.textContent = 'No hay productos disponibles.';
                listaProductos.appendChild(mensaje);
            }
            var addCartclass = document.getElementsByClassName('addCart');
            
            for (var i = 0; i < addCartclass.length; i++) {
                addCartclass[i].addEventListener('click', handleClick);
            }
        })
        .catch(function (error) {
            // Handle errors
            alert('Error al obtener los productos.');
        });

        function handleClick() {
        var IDproducto = parseInt(this.getAttribute('value'));
        var customerID = 120;
        var cantidad = 1

        var data = {
        codigo: IDproducto,
        cantidad: cantidad,
        customer: customerID
    };
    fetch(URL + 'carrito', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(function(response) {
        if (response.ok) {
            return response.json();
        } else {
            throw new Error('Error al agregar el producto al carrito.');
        }
    })
    .then(function(data) {
        console.log(data);
    })
    .catch(function(error) {
        console.error(error);
    });
console.log(data)};
    </script>
</body>

</html>
